<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MICROWAVE BLASTER</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #02000a;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    font-family: 'Press Start 2P', monospace;
    overflow: hidden;
  }

  /* CRT scanlines */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg, transparent, transparent 3px,
      rgba(0,0,0,0.13) 3px, rgba(0,0,0,0.13) 4px
    );
    pointer-events: none;
    z-index: 200;
  }

  /* Vignette */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 55%, rgba(0,0,0,0.75) 100%);
    pointer-events: none;
    z-index: 201;
  }

  .title-bar {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 8px;
    z-index: 10;
  }

  .title {
    font-size: clamp(9px, 2vw, 16px);
    color: #ff4400;
    text-shadow: 0 0 8px #ff4400, 0 0 24px #ff2200, 0 0 60px rgba(255,80,0,0.4);
    animation: flicker 5s infinite;
    letter-spacing: 2px;
  }

  @keyframes flicker {
    0%,90%,100%{opacity:1} 91%{opacity:.3} 93%{opacity:1} 95%{opacity:.1} 97%{opacity:1}
  }

  .badge {
    font-size: 7px;
    color: #ffcc00;
    text-shadow: 0 0 8px #ffcc00;
    border: 2px solid #ffcc00;
    padding: 3px 7px;
    box-shadow: 0 0 10px rgba(255,200,0,0.3);
    animation: badgePulse 1.5s ease-in-out infinite;
  }

  @keyframes badgePulse {
    0%,100%{box-shadow:0 0 10px rgba(255,200,0,0.3)} 50%{box-shadow:0 0 20px rgba(255,200,0,0.8)}
  }

  .subtitle {
    font-size: clamp(5px, 1vw, 8px);
    color: #aa66ff;
    text-shadow: 0 0 10px #aa66ff;
    margin-bottom: 16px;
    letter-spacing: 4px;
    z-index: 10;
  }

  .screen-wrap {
    position: relative;
    z-index: 10;
    padding: 6px;
    background: linear-gradient(135deg, #1a0033, #000820, #0a0a00);
    border: 3px solid #ff4400;
    box-shadow:
      0 0 0 3px #000,
      0 0 0 5px #ffcc00,
      0 0 50px rgba(255,68,0,0.5),
      0 0 100px rgba(255,68,0,0.2);
  }

  .corner { position: absolute; width: 20px; height: 20px; z-index: 12; }
  .corner.tl { top:-4px; left:-4px; border-top:4px solid #ffcc00; border-left:4px solid #ffcc00; }
  .corner.tr { top:-4px; right:-4px; border-top:4px solid #ffcc00; border-right:4px solid #ffcc00; }
  .corner.bl { bottom:-4px; left:-4px; border-bottom:4px solid #ffcc00; border-left:4px solid #ffcc00; }
  .corner.br { bottom:-4px; right:-4px; border-bottom:4px solid #ffcc00; border-right:4px solid #ffcc00; }

  canvas { display: block; }

  .hud-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    width: 100%;
    max-width: 860px;
    margin-top: 12px;
    z-index: 10;
    padding: 0 4px;
  }

  .hud-group { display: flex; gap: 24px; }

  .hud-box {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .hud-label { font-size: 6px; color: #ff4400; text-shadow: 0 0 6px #ff4400; }
  .hud-value { font-size: 9px; color: #ffcc00; text-shadow: 0 0 8px #ffcc00; }

  .accel-meter {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .meter-bar {
    width: 80px;
    height: 10px;
    border: 1px solid #ff4400;
    position: relative;
    overflow: hidden;
  }

  .meter-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff4400, #ffcc00, #ffffff);
    transition: width 0.1s;
    box-shadow: 0 0 8px #ff6600;
  }

  .insert-coin {
    font-size: 7px;
    color: #aa66ff;
    text-shadow: 0 0 10px #aa66ff;
    margin-top: 10px;
    z-index: 10;
    animation: blink 1.1s step-end infinite;
    letter-spacing: 3px;
  }
  @keyframes blink { 50%{opacity:0} }
</style>
</head>
<body>

<div class="title-bar">
  <div class="title">⚡ MICROWAVE BLASTER ⚡</div>
  <div class="badge">GHz</div>
</div>
<div class="subtitle">ACCELERATING ELECTRON RADIATION ENGINE</div>

<div class="screen-wrap">
  <div class="corner tl"></div>
  <div class="corner tr"></div>
  <div class="corner bl"></div>
  <div class="corner br"></div>
  <canvas id="c"></canvas>
</div>

<div class="hud-row">
  <div class="hud-group">
    <div class="hud-box">
      <div class="hud-label">SCORE</div>
      <div class="hud-value" id="scoreVal">00000000</div>
    </div>
    <div class="hud-box">
      <div class="hud-label">WAVELENGTH</div>
      <div class="hud-value">12.2 cm</div>
    </div>
    <div class="hud-box">
      <div class="hud-label">FREQ</div>
      <div class="hud-value">2.45 GHz</div>
    </div>
  </div>
  <div class="hud-box">
    <div class="hud-label">ACCEL</div>
    <div class="accel-meter">
      <div class="meter-bar"><div class="meter-fill" id="accelBar" style="width:0%"></div></div>
      <div class="hud-value" id="accelVal">0%</div>
    </div>
  </div>
</div>

<div class="insert-coin">▶ ACCELERATE TO RADIATE ◀</div>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const W = Math.min(window.innerWidth - 40, 860);
const H = Math.min(window.innerHeight * 0.60, 480);
canvas.width = W;
canvas.height = H;

// === Physics & layout ===
const NUM_E = 9;
const TRACK_X = W * 0.28;   // center of oscillation track
const TRACK_CY = H * 0.5;
const TRACK_HALF = H * 0.36; // half-length of oscillation range

// Each electron oscillates vertically (like in a dipole/cavity)
// Position: y = TRACK_CY + A*sin(wt + phase)
// Velocity: dy/dt = A*w*cos(wt + phase)
// Acceleration: d²y/dt² = -A*w²*sin(wt + phase)   <-- drives radiation

const OMEGA = 2.2;   // angular freq of oscillation
const AMP = TRACK_HALF * 0.82;

let t = 0;
let score = 0;

const electrons = Array.from({length: NUM_E}, (_, i) => {
  const phase = (i / NUM_E) * Math.PI * 2;
  return {
    id: i,
    phase,
    x: TRACK_X,
    y: TRACK_CY,
    vy: 0,
    ay: 0,
    prevY: TRACK_CY,
    lastEmitT: -99,
    // trail
    trail: [],
    // colour cycle
    colorShift: i * 40,
  };
});

// Microwave wavefronts: emitted when |acceleration| is high
const wavefronts = [];

// Acceleration sparkles
const sparks = [];

// ── helpers ──────────────────────────────────────────────
function hsl(h, s, l, a=1) {
  return `hsla(${h},${s}%,${l}%,${a})`;
}

function lerp(a,b,t){ return a + (b-a)*t; }

// ── background ───────────────────────────────────────────
function drawBg() {
  // subtle dot grid
  ctx.fillStyle = 'rgba(180,80,255,0.04)';
  for(let gx=0;gx<W;gx+=20) for(let gy=0;gy<H;gy+=20) {
    ctx.fillRect(gx, gy, 1, 1);
  }

  // glow behind track
  const grd = ctx.createRadialGradient(TRACK_X, TRACK_CY, 0, TRACK_X, TRACK_CY, 120);
  grd.addColorStop(0, 'rgba(255,80,0,0.06)');
  grd.addColorStop(1, 'transparent');
  ctx.fillStyle = grd;
  ctx.fillRect(0,0,W,H);
}

// ── oscillation track ────────────────────────────────────
function drawTrack() {
  // dashed rail
  ctx.save();
  ctx.setLineDash([6,8]);
  ctx.strokeStyle = 'rgba(255,100,0,0.25)';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(TRACK_X, TRACK_CY - TRACK_HALF - 10);
  ctx.lineTo(TRACK_X, TRACK_CY + TRACK_HALF + 10);
  ctx.stroke();
  ctx.restore();

  // top/bottom endcaps
  [-1,1].forEach(d => {
    const ey = TRACK_CY + d * (TRACK_HALF + 10);
    ctx.fillStyle = '#ff4400';
    ctx.shadowColor = '#ff4400';
    ctx.shadowBlur = 10;
    ctx.fillRect(TRACK_X - 12, ey - 3, 24, 6);
    ctx.shadowBlur = 0;
  });

  // label
  ctx.fillStyle = 'rgba(255,150,50,0.7)';
  ctx.font = '6px "Press Start 2P"';
  ctx.textAlign = 'center';
  ctx.fillText('CAVITY', TRACK_X, TRACK_CY - TRACK_HALF - 18);
  ctx.fillText('RESONATOR', TRACK_X, TRACK_CY - TRACK_HALF - 8);
}

// ── acceleration arrow ───────────────────────────────────
function drawAccelArrow(x, y, ay, alpha) {
  if (Math.abs(ay) < 0.5) return;
  const dir = Math.sign(ay);
  const len = Math.min(Math.abs(ay) * 1.2, 50);
  const ax = x + 22;
  const ay1 = y;
  const ay2 = y + dir * len;

  const intensity = Math.min(Math.abs(ay) / (AMP * OMEGA * OMEGA), 1);
  const col = `rgba(${Math.floor(lerp(255,255,intensity))},${Math.floor(lerp(200,50,intensity))},0,${alpha * 0.9})`;

  ctx.strokeStyle = col;
  ctx.fillStyle = col;
  ctx.shadowColor = col;
  ctx.shadowBlur = 12;
  ctx.lineWidth = 2.5;

  ctx.beginPath();
  ctx.moveTo(ax, ay1);
  ctx.lineTo(ax, ay2);
  ctx.stroke();

  // arrowhead
  ctx.beginPath();
  ctx.moveTo(ax, ay2);
  ctx.lineTo(ax - 5, ay2 - dir*10);
  ctx.lineTo(ax + 5, ay2 - dir*10);
  ctx.closePath();
  ctx.fill();

  // label
  ctx.font = '5px "Press Start 2P"';
  ctx.fillStyle = col;
  ctx.textAlign = 'left';
  ctx.fillText('a', ax + 8, ay2);
  ctx.shadowBlur = 0;
}

// ── electron ─────────────────────────────────────────────
function drawElectron(e) {
  const {x, y, vy, ay} = e;

  // Motion trail (speed-coded color)
  const speed = Math.abs(vy);
  for (let i = e.trail.length - 1; i >= 0; i--) {
    const p = e.trail[i];
    const a = (1 - i/e.trail.length) * 0.35;
    const r = 5 * (1 - i/e.trail.length);
    ctx.beginPath();
    ctx.arc(p.x, p.y, r, 0, Math.PI*2);
    // hot = fast
    const speedNorm = Math.min(p.spd / (AMP * OMEGA), 1);
    ctx.fillStyle = `hsla(${lerp(200, 30, speedNorm)},100%,60%,${a})`;
    ctx.fill();
  }

  // Acceleration-coded outer ring
  const accelNorm = Math.min(Math.abs(ay) / (AMP * OMEGA * OMEGA), 1);
  const ringColor = `hsl(${lerp(200, 15, accelNorm)},100%,65%)`;

  ctx.beginPath();
  ctx.arc(x, y, 14 + Math.sin(t*6 + e.phase)*2, 0, Math.PI*2);
  ctx.strokeStyle = ringColor;
  ctx.lineWidth = 2;
  ctx.shadowColor = ringColor;
  ctx.shadowBlur = 16;
  ctx.stroke();
  ctx.shadowBlur = 0;

  // Core glow
  const core = ctx.createRadialGradient(x, y, 0, x, y, 11);
  core.addColorStop(0, '#ffffff');
  core.addColorStop(0.35, `hsl(${lerp(180,25,accelNorm)},100%,70%)`);
  core.addColorStop(1, 'transparent');
  ctx.fillStyle = core;
  ctx.shadowColor = ringColor;
  ctx.shadowBlur = 25;
  ctx.beginPath();
  ctx.arc(x, y, 11, 0, Math.PI*2);
  ctx.fill();
  ctx.shadowBlur = 0;

  // Minus sign (electron charge)
  ctx.fillStyle = '#fff';
  ctx.font = 'bold 12px monospace';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('−', x, y+1);
  ctx.textBaseline = 'alphabetic';

  // Acceleration arrow on each electron
  drawAccelArrow(x, y, ay, 0.8);
}

// ── microwave wavefront ───────────────────────────────────
// Emitted as expanding elliptical rings with EM field vectors
function addWavefront(fromY, fromAy) {
  const strength = Math.min(Math.abs(fromAy)/(AMP*OMEGA*OMEGA), 1);
  wavefronts.push({
    cx: TRACK_X,
    cy: fromY,
    rx: 0, ry: 0,
    born: t,
    strength,
    color: strength > 0.7 ? '#ff4400' : '#ff8800',
    efield: Math.sign(fromAy), // E-field direction
    growing: true,
    alpha: 1,
    phaseAtBirth: t,
  });
}

function drawWavefront(wf) {
  if (wf.rx > W * 1.2) return false;

  // Expand rightward faster (microwaves propagate outward)
  wf.rx += 2.2 + wf.strength * 1.2;
  wf.ry += 1.3 + wf.strength * 0.7;
  wf.alpha = Math.max(0, 1 - wf.rx / (W * 0.9));

  if (wf.alpha <= 0.01) return false;

  const a = wf.alpha * wf.strength;

  // Main wavefront ellipse
  ctx.beginPath();
  ctx.ellipse(wf.cx, wf.cy, wf.rx, wf.ry, 0, -Math.PI/2, Math.PI/2);
  ctx.strokeStyle = wf.color;
  ctx.lineWidth = 1.5;
  ctx.shadowColor = wf.color;
  ctx.shadowBlur = 12;
  ctx.globalAlpha = a;
  ctx.stroke();
  ctx.shadowBlur = 0;
  ctx.globalAlpha = 1;

  // Electric field vectors along the wavefront (dots at intervals)
  const steps = 12;
  for (let s = 0; s < steps; s++) {
    const theta = lerp(-Math.PI/2 + 0.25, Math.PI/2 - 0.25, s/(steps-1));
    const wx = wf.cx + Math.cos(theta) * wf.rx;
    const wy = wf.cy + Math.sin(theta) * wf.ry;
    if (wx < TRACK_X + 10) continue;

    const phase = Math.sin(s * 0.8 - (t - wf.born) * 4);
    const efDir = wf.efield * phase;
    const efLen = 10 * Math.abs(phase) * wf.strength;

    ctx.globalAlpha = a * Math.abs(phase);
    ctx.strokeStyle = efDir > 0 ? '#ff88ff' : '#88ffff';
    ctx.shadowColor = ctx.strokeStyle;
    ctx.shadowBlur = 8;
    ctx.lineWidth = 1.5;

    // Arrow for E-field vector (perpendicular to propagation = vertical)
    ctx.beginPath();
    ctx.moveTo(wx, wy - efLen);
    ctx.lineTo(wx, wy + efLen);
    ctx.stroke();

    // Arrowhead
    const tipY = wy + Math.sign(efDir) * efLen;
    ctx.fillStyle = ctx.strokeStyle;
    ctx.beginPath();
    ctx.moveTo(wx, tipY);
    ctx.lineTo(wx - 3, tipY - Math.sign(efDir)*6);
    ctx.lineTo(wx + 3, tipY - Math.sign(efDir)*6);
    ctx.closePath();
    ctx.fill();
    ctx.shadowBlur = 0;
    ctx.globalAlpha = 1;
  }

  return true;
}

// ── sparks on high acceleration ───────────────────────────
function spawnSparks(x, y, ay) {
  const n = 5 + Math.floor(Math.abs(ay)/10);
  for(let i=0;i<n;i++) {
    const angle = Math.random() * Math.PI * 2;
    const spd = 1 + Math.random() * 4;
    sparks.push({
      x, y,
      vx: Math.cos(angle) * spd,
      vy: Math.sin(angle) * spd - 1,
      life: 1,
      decay: 0.04 + Math.random()*0.04,
      color: Math.random()>0.5 ? '#ff6600' : '#ffcc00',
      size: 2 + Math.random()*2,
    });
  }
}

function updateSparks() {
  for(let i=sparks.length-1;i>=0;i--) {
    const s = sparks[i];
    s.x += s.vx; s.y += s.vy; s.vy += 0.15;
    s.life -= s.decay;
    if(s.life<=0){ sparks.splice(i,1); continue; }
    ctx.globalAlpha = s.life;
    ctx.fillStyle = s.color;
    ctx.shadowColor = s.color;
    ctx.shadowBlur = 6;
    ctx.fillRect(s.x-s.size/2, s.y-s.size/2, s.size, s.size);
    ctx.shadowBlur = 0;
    ctx.globalAlpha = 1;
  }
}

// ── sinusoidal wave signature (composite of all electrons) ──
function drawCompositeWave() {
  // Show resulting E-field wave propagating to the right
  // It's a continuous sine determined by current t
  const startX = TRACK_X + 60;
  const waveAmp = 32;
  const wavelength = 110; // pixels

  ctx.beginPath();
  ctx.shadowColor = '#ff4400';
  ctx.shadowBlur = 14;
  ctx.lineWidth = 2;

  for(let px = startX; px < W - 10; px += 2) {
    const dist = px - startX;
    const decay = Math.exp(-dist / (W * 0.7));
    const py = TRACK_CY + Math.sin((dist / wavelength) * Math.PI * 2 - t * OMEGA * 2) * waveAmp * decay;
    px === startX ? ctx.moveTo(px, py) : ctx.lineTo(px, py);
  }

  // Color gradient along wave
  const waveGrad = ctx.createLinearGradient(startX, 0, W, 0);
  waveGrad.addColorStop(0, 'rgba(255,68,0,0.9)');
  waveGrad.addColorStop(0.4, 'rgba(255,150,50,0.7)');
  waveGrad.addColorStop(0.8, 'rgba(255,200,100,0.3)');
  waveGrad.addColorStop(1,   'rgba(255,200,100,0.0)');
  ctx.strokeStyle = waveGrad;
  ctx.stroke();
  ctx.shadowBlur = 0;

  // Label
  ctx.fillStyle = 'rgba(255,150,50,0.75)';
  ctx.font = '6px "Press Start 2P"';
  ctx.textAlign = 'left';
  ctx.fillText('MICROWAVE  E-FIELD', startX + 4, TRACK_CY - waveAmp - 10);
}

// ── axes + labels ─────────────────────────────────────────
function drawAxes() {
  // Horizontal axis
  ctx.strokeStyle = 'rgba(255,255,255,0.1)';
  ctx.lineWidth = 1;
  ctx.setLineDash([6,10]);
  ctx.beginPath();
  ctx.moveTo(TRACK_X + 50, TRACK_CY);
  ctx.lineTo(W - 10, TRACK_CY);
  ctx.stroke();
  ctx.setLineDash([]);

  // E, B labels at edge
  ctx.fillStyle = 'rgba(255,150,50,0.55)';
  ctx.font = '7px "Press Start 2P"';
  ctx.textAlign = 'right';
  ctx.fillText('→ λ', W - 10, TRACK_CY - 5);
}

// ── mini oscilloscope ─────────────────────────────────────
function drawOscilloscope() {
  const bx = W-190, by = H-60, bw = 175, bh = 48;
  ctx.fillStyle = 'rgba(10,0,20,0.85)';
  ctx.fillRect(bx, by, bw, bh);
  ctx.strokeStyle = '#ff4400';
  ctx.lineWidth = 1;
  ctx.strokeRect(bx, by, bw, bh);
  ctx.fillStyle = '#ff4400';
  ctx.font = '5px "Press Start 2P"';
  ctx.textAlign = 'left';
  ctx.fillText('ACCEL WAVEFORM', bx+5, by+10);

  ctx.beginPath();
  ctx.strokeStyle = '#ffcc00';
  ctx.lineWidth = 1.5;
  ctx.shadowColor = '#ffcc00';
  ctx.shadowBlur = 6;
  for(let px=0;px<bw-10;px++) {
    // show acceleration waveform = -sin (deriv of cos velocity)
    const py = (bh/2+8) - Math.sin((px/(bw-10))*Math.PI*6 - t*OMEGA*2.5) * (bh*0.28);
    px===0 ? ctx.moveTo(bx+5+px, by+py) : ctx.lineTo(bx+5+px, by+py);
  }
  ctx.stroke();
  ctx.shadowBlur = 0;
}

// ── HUD updates ───────────────────────────────────────────
const scoreEl = document.getElementById('scoreVal');
const accelBar = document.getElementById('accelBar');
const accelVal = document.getElementById('accelVal');
let lastScore = 0;

function updateHUD(maxAccelNorm) {
  score += Math.floor(maxAccelNorm * 80);
  if(score !== lastScore) {
    scoreEl.textContent = String(score).padStart(8,'0');
    lastScore = score;
  }
  const pct = Math.round(maxAccelNorm * 100);
  accelBar.style.width = pct + '%';
  accelVal.textContent = pct + '%';
}

// ── FRAME LOOP ────────────────────────────────────────────
function frame() {
  ctx.clearRect(0, 0, W, H);
  drawBg();
  drawAxes();
  drawTrack();

  let maxAccelNorm = 0;
  const emitThreshold = AMP * OMEGA * OMEGA * 0.55;

  // Update electrons
  electrons.forEach(e => {
    const y = TRACK_CY + AMP * Math.sin(OMEGA * t + e.phase);
    const vy = AMP * OMEGA * Math.cos(OMEGA * t + e.phase);
    const ay = -AMP * OMEGA * OMEGA * Math.sin(OMEGA * t + e.phase);

    e.prevY = e.y;
    e.x = TRACK_X;
    e.y = y;
    e.vy = vy;
    e.ay = ay;

    // trail
    e.trail.unshift({x: e.x, y: e.y, spd: Math.abs(vy)});
    if(e.trail.length > 14) e.trail.pop();

    const accelNorm = Math.min(Math.abs(ay)/(AMP*OMEGA*OMEGA), 1);
    maxAccelNorm = Math.max(maxAccelNorm, accelNorm);

    // Emit wavefront when acceleration crosses peak
    if(Math.abs(ay) > emitThreshold && t - e.lastEmitT > 0.4) {
      addWavefront(y, ay);
      spawnSparks(e.x, e.y, ay);
      e.lastEmitT = t;
      score += 50;
    }
  });

  // Draw composite microwave
  drawCompositeWave();

  // Draw wavefronts
  for(let i=wavefronts.length-1;i>=0;i--) {
    if(!drawWavefront(wavefronts[i])) wavefronts.splice(i,1);
  }

  // Draw electrons on top
  electrons.forEach(e => drawElectron(e));

  // Sparks
  updateSparks();

  // Physics label box
  ctx.fillStyle = 'rgba(8,0,18,0.82)';
  ctx.fillRect(8, 8, 175, 56);
  ctx.strokeStyle = '#aa44ff';
  ctx.lineWidth = 1;
  ctx.strokeRect(8, 8, 175, 56);
  ctx.fillStyle = '#aa44ff';
  ctx.font = '5px "Press Start 2P"';
  ctx.textAlign = 'left';
  ctx.fillText('LARMOR RADIATION', 14, 22);
  ctx.fillStyle = '#ffcc00';
  ctx.fillText('P ∝ q²a² / c³', 14, 37);
  ctx.fillStyle = 'rgba(200,150,255,0.8)';
  ctx.fillText('accel electron → photon', 14, 52);

  // Score top right
  ctx.fillStyle = '#ffcc00';
  ctx.font = '8px "Press Start 2P"';
  ctx.textAlign = 'right';
  ctx.shadowColor = '#ffcc00';
  ctx.shadowBlur = 8;
  ctx.fillText('1UP', W - 10, 22);
  ctx.shadowBlur = 0;

  drawOscilloscope();
  updateHUD(maxAccelNorm);

  // Watermark
  ctx.fillStyle = 'rgba(255,68,0,0.3)';
  ctx.font = '5px "Press Start 2P"';
  ctx.textAlign = 'center';
  ctx.fillText('© 2084 QUANTUMCORP INDUSTRIES', W/2, H - 6);

  t += 0.016;
  requestAnimationFrame(frame);
}

frame();
</script>
</body>
</html>
